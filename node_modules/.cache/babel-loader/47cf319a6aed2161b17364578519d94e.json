{"ast":null,"code":"var _jsxFileName = \"/Users/factweavers/Sites/musetown_ui/src/Routes/Home/index.js\";\n\n/* eslint-disable max-lines */\n\n/* eslint-disable weavers-react/react_maxlines_per_function */\n\n/* eslint-disable no-console */\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport style from './style.module.scss';\nimport Logo from '../../../public/img/MuSE_logo.png';\nimport InputField from '../../Components/InputField';\nimport { getSearchResults } from '../../api/getSearchResults';\nimport { Card, CardBody } from '../../Components/Card';\nimport { ContentLoader } from '../../Components/ContentLoader';\nimport { makeUrl, parseWebUrl } from '../../utils/queryString';\nimport EmptyState, { TYPES } from '../../Components/EmptyState';\nimport OutPutContainer from './Children/OutPutContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Home extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      loading: false,\n      error: false,\n      value: null,\n      checkedExact: false,\n      outputLabel: 'Here are your 10K+ results for ...',\n      exactCreators: [],\n      creators: [],\n      total: 1,\n      videos: [],\n      offset: 0,\n      clickedShowMore: false,\n      stopShowMore: false\n    };\n\n    this.componentDidMount = () => {\n      let urlParams = this.getUrlParams();\n\n      if (urlParams.search) {\n        this.setState({\n          value: urlParams.search\n        });\n        if (urlParams.checked) this.setState({\n          checkedExact: urlParams.checked\n        });\n        this.handleSubmit();\n      }\n    };\n\n    this.handleSearchInput = _ref => {\n      let {\n        value\n      } = _ref;\n      this.setState({\n        value\n      });\n    };\n\n    this.handleCheck = _ref2 => {\n      let {\n        value\n      } = _ref2;\n      this.setState({\n        checkedExact: value\n      });\n    };\n\n    this.handleSubmit = async () => {\n      let payload = {\n        keyword: this.state.value,\n        exact_match_opt: this.state.checkedExact,\n        offset: this.state.offset\n      };\n      let urlParams = this.getUrlParams();\n      if (this.state.value) this.setWebUrlParam({ ...urlParams,\n        search: this.state.value,\n        checked: this.state.checkedExact\n      });\n      this.setState({\n        loading: true,\n        error: false\n      });\n      await this.submitAction(payload);\n    };\n\n    this.getMoreCreators = async () => {\n      this.setState({\n        clickedShowMore: true\n      });\n      this.interval = setInterval(() => {\n        this.handleSubmit(this.state.offset + 4);\n        this.setState({\n          offset: this.state.offset + 4\n        });\n      }, 5000);\n      this.setState({\n        offset: this.state.offset + 4\n      });\n    };\n\n    this.submitAction = async payload => {\n      try {\n        let response = await getSearchResults(payload);\n        let {\n          exact_creators: exactCreators = [],\n          creators = [],\n          total,\n          videos\n        } = response;\n        let {\n          creators: oldCreators,\n          videos: oldVideos\n        } = this.state;\n\n        if (oldCreators.length) {\n          let oldLength = oldCreators.length;\n          creators.forEach(item => {\n            let index = oldCreators.findIndex(old => old.id === item.id);\n            if (index < 0) oldCreators.push(item);\n          });\n          creators = oldCreators;\n          if (oldLength === oldCreators.length) this.setState({\n            stopShowMore: true\n          });\n        }\n\n        if (oldVideos.length) videos = [...oldVideos, ...videos];\n        this.setState({\n          exactCreators,\n          creators,\n          loading: false,\n          total: total.value,\n          videos,\n          outputLabel: `Here are your ${total.value} results for ${this.state.value}`\n        });\n      } catch (error) {\n        this.setState({\n          loading: false,\n          error: true\n        });\n      }\n    };\n\n    this.setWebUrlParam = paramJson => {\n      let {\n        location: {\n          pathname\n        }\n      } = this.props;\n      this.props.history.replace({\n        pathname: pathname,\n        search: makeUrl(paramJson)\n      });\n    };\n\n    this.getUrlParams = () => {\n      let urlParams = parseWebUrl(this.props.location.search);\n      return urlParams;\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.offset !== this.state.offset) {\n      this.handleSubmit();\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    const {\n      exactCreators = [],\n      creators = [],\n      loading,\n      videos = [],\n      clickedShowMore,\n      error,\n      stopShowMore\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: style.logo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.logo,\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: Logo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: style.inputFieldSearch,\n        children: /*#__PURE__*/_jsxDEV(InputField, {\n          placeholderLabel: 'Search',\n          htmlForName: \"search\",\n          onPressEnter: this.handleSubmit,\n          onChange: this.handleSearchInput,\n          value: this.state.value,\n          showLabel: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 5\n      }, this), loading && !clickedShowMore ? /*#__PURE__*/_jsxDEV(LoaderItem, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 6\n      }, this) : exactCreators.length || creators.length ? /*#__PURE__*/_jsxDEV(OutPutContainer, {\n        searchText: this.state.value,\n        creators: creators,\n        exactCreators: exactCreators,\n        videos: videos,\n        clickedShowMore: clickedShowMore,\n        getMoreCreators: this.getMoreCreators,\n        loading: loading,\n        stopShowMore: stopShowMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 6\n      }, this) : this.getUrlParams().search && (!exactCreators.length || !creators.length) ? error ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        title: 'Error, Something went wrong',\n        type: TYPES.RESULTS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 7\n      }, this) : /*#__PURE__*/_jsxDEV(EmptyState, {\n        title: 'No creators found',\n        type: TYPES.RESULTS\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }, this) : null]\n    }, void 0, true);\n  }\n\n}\n\nexport default Home;\n\nfunction LoaderItem() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [1, 2].map((result, index) => /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardBody, {\n        children: /*#__PURE__*/_jsxDEV(ContentLoader, {\n          hasWrapper: true,\n          height: 0.8,\n          spaceBetween: 0.5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 6\n      }, this)\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 5\n    }, this))\n  }, void 0, false);\n}\n\n_c = LoaderItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoaderItem\");","map":{"version":3,"sources":["/Users/factweavers/Sites/musetown_ui/src/Routes/Home/index.js"],"names":["React","Component","Link","style","Logo","InputField","getSearchResults","Card","CardBody","ContentLoader","makeUrl","parseWebUrl","EmptyState","TYPES","OutPutContainer","Home","state","loading","error","value","checkedExact","outputLabel","exactCreators","creators","total","videos","offset","clickedShowMore","stopShowMore","componentDidMount","urlParams","getUrlParams","search","setState","checked","handleSubmit","handleSearchInput","handleCheck","payload","keyword","exact_match_opt","setWebUrlParam","submitAction","getMoreCreators","interval","setInterval","response","exact_creators","oldCreators","oldVideos","length","oldLength","forEach","item","index","findIndex","old","id","push","paramJson","location","pathname","props","history","replace","componentDidUpdate","prevProps","prevState","componentWillUnmount","clearInterval","render","logo","inputFieldSearch","RESULTS","LoaderItem","map","result"],"mappings":"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","sourcesContent":["/* eslint-disable max-lines */\n/* eslint-disable weavers-react/react_maxlines_per_function */\n/* eslint-disable no-console */\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport style from './style.module.scss';\nimport Logo from '../../../public/img/MuSE_logo.png';\nimport InputField from '../../Components/InputField';\nimport { getSearchResults } from '../../api/getSearchResults';\nimport { Card, CardBody } from '../../Components/Card';\nimport { ContentLoader } from '../../Components/ContentLoader';\nimport { makeUrl, parseWebUrl } from '../../utils/queryString';\nimport EmptyState, { TYPES } from '../../Components/EmptyState';\nimport OutPutContainer from './Children/OutPutContainer';\nclass Home extends Component {\n\tstate = {\n\t\tloading: false,\n\t\terror: false,\n\t\tvalue: null,\n\t\tcheckedExact: false,\n\t\toutputLabel: 'Here are your 10K+ results for ...',\n\t\texactCreators: [],\n\t\tcreators: [],\n\t\ttotal: 1,\n\t\tvideos: [],\n\t\toffset: 0,\n\t\tclickedShowMore: false,\n\t\tstopShowMore: false,\n\t};\n\n\tcomponentDidMount = () => {\n\t\tlet urlParams = this.getUrlParams();\n\t\tif (urlParams.search) {\n\t\t\tthis.setState({ value: urlParams.search });\n\t\t\tif (urlParams.checked)\n\t\t\t\tthis.setState({ checkedExact: urlParams.checked });\n\t\t\tthis.handleSubmit();\n\t\t}\n\t};\n\n\thandleSearchInput = ({ value }) => {\n\t\tthis.setState({ value });\n\t};\n\thandleCheck = ({ value }) => {\n\t\tthis.setState({ checkedExact: value });\n\t};\n\n\thandleSubmit = async () => {\n\t\tlet payload = {\n\t\t\tkeyword: this.state.value,\n\t\t\texact_match_opt: this.state.checkedExact,\n\t\t\toffset: this.state.offset,\n\t\t};\n\t\tlet urlParams = this.getUrlParams();\n\t\tif (this.state.value)\n\t\t\tthis.setWebUrlParam({\n\t\t\t\t...urlParams,\n\t\t\t\tsearch: this.state.value,\n\t\t\t\tchecked: this.state.checkedExact,\n\t\t\t});\n\t\tthis.setState({ loading: true, error: false });\n\t\tawait this.submitAction(payload);\n\t};\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (prevState.offset !== this.state.offset) {\n\t\t\tthis.handleSubmit();\n\t\t}\n\t}\n\n\tgetMoreCreators = async () => {\n\t\tthis.setState({ clickedShowMore: true });\n\t\tthis.interval = setInterval(() => {\n\t\t\tthis.handleSubmit(this.state.offset + 4);\n\t\t\tthis.setState({ offset: this.state.offset + 4 });\n\t\t}, 5000);\n\t\tthis.setState({ offset: this.state.offset + 4 });\n\t};\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interval);\n\t}\n\n\tsubmitAction = async (payload) => {\n\t\ttry {\n\t\t\tlet response = await getSearchResults(payload);\n\t\t\tlet {\n\t\t\t\texact_creators: exactCreators = [],\n\t\t\t\tcreators = [],\n\t\t\t\ttotal,\n\t\t\t\tvideos,\n\t\t\t} = response;\n\t\t\tlet { creators: oldCreators, videos: oldVideos } = this.state;\n\t\t\tif (oldCreators.length) {\n\t\t\t\tlet oldLength = oldCreators.length;\n\t\t\t\tcreators.forEach((item) => {\n\t\t\t\t\tlet index = oldCreators.findIndex(\n\t\t\t\t\t\t(old) => old.id === item.id\n\t\t\t\t\t);\n\t\t\t\t\tif (index < 0) oldCreators.push(item);\n\t\t\t\t});\n\t\t\t\tcreators = oldCreators;\n\t\t\t\tif (oldLength === oldCreators.length)\n\t\t\t\t\tthis.setState({ stopShowMore: true });\n\t\t\t}\n\n\t\t\tif (oldVideos.length) videos = [...oldVideos, ...videos];\n\t\t\tthis.setState({\n\t\t\t\texactCreators,\n\t\t\t\tcreators,\n\t\t\t\tloading: false,\n\t\t\t\ttotal: total.value,\n\t\t\t\tvideos,\n\t\t\t\toutputLabel: `Here are your ${total.value} results for ${this.state.value}`,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tthis.setState({ loading: false, error: true });\n\t\t}\n\t};\n\n\tsetWebUrlParam = (paramJson) => {\n\t\tlet {\n\t\t\tlocation: { pathname },\n\t\t} = this.props;\n\t\tthis.props.history.replace({\n\t\t\tpathname: pathname,\n\t\t\tsearch: makeUrl(paramJson),\n\t\t});\n\t};\n\n\tgetUrlParams = () => {\n\t\tlet urlParams = parseWebUrl(this.props.location.search);\n\t\treturn urlParams;\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\texactCreators = [],\n\t\t\tcreators = [],\n\t\t\tloading,\n\t\t\tvideos = [],\n\t\t\tclickedShowMore,\n\t\t\terror,\n\t\t\tstopShowMore,\n\t\t} = this.state;\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<section className={style.logo}></section>\n\t\t\t\t<div className={style.logo}>\n\t\t\t\t\t<Link>\n\t\t\t\t\t\t<img src={Logo} />\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div className={style.inputFieldSearch}>\n\t\t\t\t\t<InputField\n\t\t\t\t\t\tplaceholderLabel={'Search'}\n\t\t\t\t\t\thtmlForName='search'\n\t\t\t\t\t\tonPressEnter={this.handleSubmit}\n\t\t\t\t\t\tonChange={this.handleSearchInput}\n\t\t\t\t\t\tvalue={this.state.value}\n\t\t\t\t\t\tshowLabel={false}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{loading && !clickedShowMore ? (\n\t\t\t\t\t<LoaderItem />\n\t\t\t\t) : exactCreators.length || creators.length ? (\n\t\t\t\t\t<OutPutContainer\n\t\t\t\t\t\tsearchText={this.state.value}\n\t\t\t\t\t\tcreators={creators}\n\t\t\t\t\t\texactCreators={exactCreators}\n\t\t\t\t\t\tvideos={videos}\n\t\t\t\t\t\tclickedShowMore={clickedShowMore}\n\t\t\t\t\t\tgetMoreCreators={this.getMoreCreators}\n\t\t\t\t\t\tloading={loading}\n\t\t\t\t\t\tstopShowMore={stopShowMore}\n\t\t\t\t\t/>\n\t\t\t\t) : this.getUrlParams().search &&\n\t\t\t\t  (!exactCreators.length || !creators.length) ? (\n\t\t\t\t\terror ? (\n\t\t\t\t\t\t<EmptyState\n\t\t\t\t\t\t\ttitle={'Error, Something went wrong'}\n\t\t\t\t\t\t\ttype={TYPES.RESULTS}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<EmptyState\n\t\t\t\t\t\t\ttitle={'No creators found'}\n\t\t\t\t\t\t\ttype={TYPES.RESULTS}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t) : null}\n\t\t\t</>\n\t\t);\n\t}\n}\nexport default Home;\n\nfunction LoaderItem() {\n\treturn (\n\t\t<>\n\t\t\t{[1, 2].map((result, index) => (\n\t\t\t\t<Card key={index}>\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<ContentLoader\n\t\t\t\t\t\t\thasWrapper={true}\n\t\t\t\t\t\t\theight={0.8}\n\t\t\t\t\t\t\tspaceBetween={0.5}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t))}\n\t\t</>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}